import os
import random
import logging

from telegram import ReplyKeyboardMarkup, Update
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    filters,
)

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    level=logging.INFO,
)
logger = logging.getLogger(__name__)

BOT_TOKEN = os.environ.get("BOT_TOKEN")


# ------------------------
# –î–ê–ù–ù–´–ï
# ------------------------

RESOURCES = [
    "Pinterest: –≤–æ–∑—å–º–∏ –æ–¥–∏–Ω –≥–∞–π–¥/–∞–∫–∫–æ—Ä–¥—ã/–ª–∞–π—Ñ—Ö–∞–∫ –∏–∑ –¥–æ—Å–∫–∏ https://pin.it/5mY6kTJlH",
    "Reels: –æ—Ç–∫—Ä–æ–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω–∫—É —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º –∏–ª–∏ –≥–∞–π–¥–æ–º –∏ –≤–æ–∑—å–º–∏ –∏–¥–µ—é –æ—Ç—Ç—É–¥–∞",
    "–°—Ç–∞—Ä—ã–µ –ø—Ä–æ–µ–∫—Ç—ã: –æ—Ç–∫—Ä–æ–π –Ω–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–π –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –æ—Ç—Ç—É–¥–∞",
    "–ö–Ω–∏–≥–∞ ¬´–¢–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫¬ª: –≤—ã–±–µ—Ä–∏ –≥–ª–∞–≤—É –ø–æ–¥ –Ω–∞–≤—ã–∫ (—Ä–∏—Ç–º, –≥–∞—Ä–º–æ–Ω–∏—è, –∑–≤—É–∫, —Å–≤–µ–¥–µ–Ω–∏–µ, –º–∞—Å—Ç–µ—Ä–∏–Ω–≥)",
    "–°–ª—É—á–∞–π–Ω—ã–π –∑–≤—É–∫: –∑–∞–ø–∏—à–∏ –±—ã—Ç–æ–≤–æ–π —à—É–º/–≥–æ–ª–æ—Å/–ø–æ–ª–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ –∏—Å—Ö–æ–¥–Ω–∏–∫",
]

ACTIONS = [
    # 1. –†–∞–∑–æ–≥—Ä–µ–≤
    "–°–¥–µ–ª–∞–π —á—Ç–æ-—Ç–æ –Ω–∞—Ä–æ—á–Ω–æ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ–µ, –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã —Ä–∞–∑–æ–≥—Ä–µ—Ç—å—Å—è.",
    "–ü–æ–≤—Ç–æ—Ä–∏ —Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —É—Å–ª—ã—à–∞–ª–∞ (—à–∞–≥–∏, —Ä–µ—á—å, —É–ª–∏—Ü–∞).",
    "–í–æ–∑—å–º–∏ –ª—É–ø –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ç—Ä–µ–∫–∞, —É–¥–∞–ª–∏ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∏ –ø–æ—Å—Ç—Ä–æ–π –≤–æ–∫—Ä—É–≥ –Ω–µ–≥–æ –Ω–æ–≤—ã–π –∫—É—Å–æ–∫, –∫–∞–∫ –±—É–¥—Ç–æ —ç—Ç–æ —Å—ç–º–ø–ª.",
    "–°–¥–µ–ª–∞–π –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç: 8 —Å–µ–∫—É–Ω–¥. –ï—Å–ª–∏ –∏–¥—ë—Ç —Ö–æ—Ä–æ—à–æ, —Å–¥–µ–ª–∞–π 16, 24 –∏ 32.",
    # 2. –†–∏—Ç–º –∏ –≥—Ä—É–≤
    "–°–¥–≤–∏–Ω—å –∫–∏–∫ –∏–ª–∏ —Å–Ω–µ–π—Ä –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º—Å –∏ –ø–æ—Å–ª—É—à–∞–π, –≥–¥–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–∞—á.",
    "–°–¥–µ–ª–∞–π —Ä–∏—Ç–º, –≥–¥–µ –∫–∞–∂–¥—ã–π —É–¥–∞—Ä —Ö–æ—Ç—å —á–µ–º-—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è: –≥—Ä–æ–º–∫–æ—Å—Ç—å, –∑–≤—É–∫, –¥–ª–∏–Ω–∞ –∏–ª–∏ –ø–∞–Ω–æ—Ä–∞–º–∞.",
    "–°–¥–µ–ª–∞–π –≥—Ä—É–≤ –∏–∑ –æ–¥–Ω–æ–≥–æ —Ö–∞–π-—Ö—ç—Ç–∞, –¥–æ–±–∞–≤–ª—è—è –¥—ã—Ö–∞–Ω–∏–µ –ø–∞—É–∑–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –≥—Ä–æ–º–∫–æ—Å—Ç–∏.",
    "–í–æ–∑—å–º–∏ –∞—É–¥–∏–æ–ª—É–ø –∏ –Ω–∞—Ä–µ–∂—å –Ω–∞ —á–∞—Å—Ç–∏, –ø–µ—Ä–µ—Å—Ç–∞–≤—å –∏—Ö –∏ —Å–æ–±–µ—Ä–∏ —Å–≤–æ–π –≥—Ä—É–≤.",
    # 3. –ì–∞—Ä–º–æ–Ω–∏—è –∏ –∑–≤—É–∫
    "–°–¥–µ–ª–∞–π –∫–æ—Ä–æ—Ç–∫–∏–π –ª—É–ø –∏ –º–µ–¥–ª–µ–Ω–Ω–æ –º–µ–Ω—è–π —Ñ–∏–ª—å—Ç—Ä/—ç—Ñ—Ñ–µ–∫—Ç, —Å—Ä–∞–∑—É –∑–∞–ø–∏—à–∏ —ç—Ç–æ –≤ –∞—É–¥–∏–æ.",
    "–í–æ–∑—å–º–∏ –∞–∫–∫–æ—Ä–¥—ã –∏–∑ –ª—é–±–∏–º–æ–≥–æ —Ç—Ä–µ–∫–∞ –∏ –∏–∑–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç: –¥—Ä—É–≥–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Ç–µ–º–ø –∏–ª–∏ —Ä–∏—Ç–º.",
    "–°–¥–µ–ª–∞–π –¥—Ä–æ–Ω –∏–∑ –æ–¥–Ω–æ–π –Ω–æ—Ç—ã, –Ω–æ –¥–æ–±–∞–≤—å –¥–≤–∏–∂–µ–Ω–∏–µ –º–æ–¥—É–ª—è—Ü–∏–µ–π, —à—É–º–∞–º–∏ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π.",
    "–°–æ–±–µ—Ä–∏ —Ü–µ–ø–æ—á–∫—É –∞–∫–∫–æ—Ä–¥–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥—Ç–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—Ç–≤–æ—Ä—è–µ—Ç—Å—è (—Ç–∏—à–µ, –º—è–≥—á–µ, –º–µ–Ω—å—à–µ —á–∞—Å—Ç–æ—Ç).",
    # 4. –ë–∞—Å –∏ —Ç–µ–ª–æ
    "–°–¥–µ–ª–∞–π –±–∞—Å –≤ —Å—Ä–µ–¥–Ω–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ, –±–µ–∑ —Å–∞–±–∞. –î–æ–±–µ–π—Å—è, —á—Ç–æ–±—ã –æ–Ω —á—É–≤—Å—Ç–≤–æ–≤–∞–ª—Å—è, –∞ –Ω–µ –≥—É–¥–µ–ª.",
    "–ü—Ä–æ–ø–æ–π –±–∞—Å–æ–≤—É—é –ª–∏–Ω–∏—é –≥–æ–ª–æ—Å–æ–º, –∑–∞–ø–∏—à–∏ –∏ —Å—ã–≥—Ä–∞–π/—Å—ç–º–ø–ª–∏—Ä—É–π –ø–æ –Ω–µ–π.",
    "–°–¥–µ–ª–∞–π –±–∞—Å —á—É—Ç—å –≥—Ä—è–∑–Ω—ã–º (—Å–∞—Ç—É—Ä–∞—Ü–∏—è/–¥–µ—Ñ–æ—Ä–º–∞—Ü–∏—è), –Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã —ç—Ç–æ —Å—Ç–∞–ª–æ –ø—Ä–∏—ë–º–æ–º.",
    "–í–æ–∑—å–º–∏ –±–∞—Å –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏–∑–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ —Ä–∏—Ç–º–∏–∫—É, –Ω–µ –Ω–æ—Ç—ã.",
    # 5. –ú–µ–ª–æ–¥–∏—è
    "–ù–∞–ø–æ–π –º–µ–ª–æ–¥–∏—é –∏ —Å—ã–≥—Ä–∞–π –µ—ë –Ω–∞ —Å–ª—É—Ö, –¥–∞–∂–µ –µ—Å–ª–∏ –∫—Ä–∏–≤–æ.",
    "–°—ã–≥—Ä–∞–π –º–µ–ª–æ–¥–∏—é –æ–¥–Ω–æ–π —Ä—É–∫–æ–π –±–µ–∑ –æ–±–¥—É–º—ã–≤–∞–Ω–∏—è, –ø—Ä–æ—Å—Ç–æ –ø–æ —á—É–≤—Å—Ç–≤—É.",
    "–°–¥–µ–ª–∞–π –º–µ–ª–æ–¥–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥—Ç–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç: —Ñ—Ä–∞–∑–∞, –ø–∞—É–∑–∞, —Ñ—Ä–∞–∑–∞.",
    "–í–æ–∑—å–º–∏ —Å–≤–æ—é –º–µ–ª–æ–¥–∏—é –∏ —É–¥–∞–ª–∏ –∏–∑ –Ω–µ—ë 50% –Ω–æ—Ç, —á—Ç–æ–±—ã –æ–Ω–∞ –∑–∞–¥—ã—à–∞–ª–∞.",
    # 6. –ê—Ä–∞–Ω–∂–∏—Ä–æ–≤–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
    "–í–æ–∑—å–º–∏ —Ç–æ–ª—å–∫–æ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω–∏ –∏–∑ –Ω–µ–≥–æ –≤–µ—Å—å –∫—É—Å–æ–∫, –Ω–µ –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã—Ö –∑–≤—É–∫–æ–≤.",
    "–°–¥–µ–ª–∞–π –≤–µ—Ä—Å–∏—é —Ç—Ä–µ–∫–∞ –±–µ–∑ –∫—É–ª—å–º–∏–Ω–∞—Ü–∏–∏: –≤—Å—ë –≤ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏, –±–µ–∑ –¥—Ä–æ–ø–∞.",
    "–ü–æ–º–µ–Ω—è–π –º–µ—Å—Ç–∞–º–∏ –∏–Ω—Ç—Ä–æ –∏ –∞—É—Ç—Ä–æ –∏ –ø–æ—Å–ª—É—à–∞–π, –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ.",
    "–°–æ–±–µ—Ä–∏ –º–∏–Ω—É—Ç–Ω—ã–π —Ç—Ä–µ–∫, –≥–¥–µ –∫–∞–∂–¥—É—é —á–µ—Ç–≤–µ—Ä–∫—É —Ç–∞–∫—Ç–æ–≤ —á—Ç–æ-—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è.",
    # 7. –°–≤–µ–¥–µ–Ω–∏–µ
    "–í—ã–∫–ª—é—á–∞–π –ø–æ –æ–¥–Ω–æ–π –¥–æ—Ä–æ–∂–∫–µ, –ø–æ–∫–∞ —Ç—Ä–µ–∫ –Ω–µ –Ω–∞—á–Ω—ë—Ç –∑–≤—É—á–∞—Ç—å –ª—É—á—à–µ. –°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç—É –≤–µ—Ä—Å–∏—é.",
    "–°–≤–µ–¥–∏ —Ç–æ–ª—å–∫–æ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é –∏ –ø–∞–Ω–æ—Ä–∞–º–æ–π, –±–µ–∑ —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä–∞.",
    "–í—ã—Å—Ç–∞–≤—å –±–∞–ª–∞–Ω—Å —Ç–æ–ª—å–∫–æ –ø–æ —Å–ª—É—Ö—É, –Ω–µ –≥–ª—è–¥—è –Ω–∞ —É—Ä–æ–≤–Ω–∏.",
    "–ü—Ä–æ–ø—É—Å—Ç–∏ –≤—Å—ë —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –æ–±—â–∏–π bus —Å –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π –∏ –¥–æ–±–µ–π—Å—è —Ü–µ–ª—å–Ω–æ–≥–æ –∑–≤—É—á–∞–Ω–∏—è.",
    # 8. –ú–∞—Å—Ç–µ—Ä–∏–Ω–≥ –∏ –æ—â—É—â–µ–Ω–∏–µ
    "–ü–æ—Å—Ç–∞–≤—å –æ–¥–∏–Ω –ª–∏–º–∏—Ç–µ—Ä –∏ –∏—â–∏ —Ç–æ—á–∫—É, –≥–¥–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –ø–ª–æ—Å–∫–æ. –ó–∞–ø–æ–º–Ω–∏ —ç—Ç–æ—Ç –ø–æ—Ä–æ–≥.",
    "–°–¥–µ–ª–∞–π –≥—Ä–æ–º–∫—É—é –∏ —Ç–∏—Ö—É—é –≤–µ—Ä—Å–∏—é –∏ —Å—Ä–∞–≤–Ω–∏, –∫–∞–∫–∞—è –ª—É—á—à–µ –ø–µ—Ä–µ–¥–∞—ë—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.",
    "–≠–∫—Å–ø–æ—Ä—Ç–Ω–∏ –∏ –ø–æ—Å–ª—É—à–∞–π –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (—Ç–µ–ª–µ—Ñ–æ–Ω/—É–ª–∏—Ü–∞).",
    "–°–¥–µ–ª–∞–π —Å–æ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é: —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –º—è–≥—á–µ, —Ç–∏—à–µ –∏ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Ö–≤–æ—Å—Ç–∞–º–∏.",
    # 9. –ö—Ä–µ–∞—Ç–∏–≤
    "–°–¥–µ–ª–∞–π —Ç—Ä–µ–∫ –Ω–µ –¥–ª—è –ª—é–¥–µ–π: –¥–ª—è —Å–æ–±–∞–∫–∏/–º–∞–º—ã/–ø–æ–¥—Ä—É–≥–∏/–≤–æ–¥–∏—Ç–µ–ª—è/—Å–µ–±—è —á–µ—Ä–µ–∑ 10 –ª–µ—Ç.",
    "–°–¥–µ–ª–∞–π –∫—É—Å–æ–∫ –∑–≤—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–ª—É—à–∞—Ç—å –ø–æ –∫—Ä—É–≥—É, –∫–∞–∫ –º–µ–¥–∏—Ç–∞—Ü–∏—é.",
    "–í–æ–∑—å–º–∏ –ø—Ä–∏—ë–º –∏–∑ –ª—é–±–∏–º–æ–≥–æ —Ç—Ä–µ–∫–∞ –∏ –ø—Ä–∏–º–µ–Ω–∏ –µ–≥–æ –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (—Ç–µ–º–ø/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç/–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ).",
]

FOCUSES = [
    "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏: 15 –º–∏–Ω—É—Ç.",
    "–¢–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã.",
    "–û–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤—Å–µ–≥–æ —Ç—Ä–µ–∫–∞.",
    "–ë–µ–∑ —É–¥–∞—Ä–Ω—ã—Ö.",
    "–ë–µ–∑ –≥–∞—Ä–º–æ–Ω–∏–∏, —Ç–æ–ª—å–∫–æ —Ä–∏—Ç–º –∏ –∑–≤—É–∫.",
    "–¢–æ–ª—å–∫–æ —à—É–º—ã –∏ –∑–∞–ø–∏—Å–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞.",
    "–°–¥–µ–ª–∞–π –≤—Å—ë –≤ –º–æ–Ω–æ –∏ –¥–æ–±–µ–π—Å—è –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é –∏ —á–∞—Å—Ç–æ—Ç–∞–º–∏.",
    "–ü—É—Å—Ç—å –≤—Å—ë –∑–≤—É—á–∏—Ç –∫–∞–∫ –ø–æ–¥ –≤–æ–¥–æ–π (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –º—è–≥–∫–æ—Å—Ç—å).",
    "–ü—É—Å—Ç—å –≤—Å—ë –∑–≤—É—á–∏—Ç –∫–∞–∫ —É—Ç—Ä–æ.",
    "–ü—É—Å—Ç—å –≤—Å—ë –∑–≤—É—á–∏—Ç –∫–∞–∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–∏—Ç—Ä—ã.",
]

MAIN_KB = ReplyKeyboardMarkup(
    [["üé≤ –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ"], ["üìö –ß—Ç–æ —ç—Ç–æ –∑–∞ —Å–∏—Å—Ç–µ–º–∞?"]],
    resize_keyboard=True,
)


def build_task() -> str:
    resource = random.choice(RESOURCES)
    action = random.choice(ACTIONS)
    focus = random.choice(FOCUSES)
    return (
        "–†–ï–°–£–†–°:\n"
        f"‚Ä¢ {resource}\n\n"
        "–ó–ê–î–ê–ù–ò–ï:\n"
        f"‚Ä¢ {action}\n\n"
        "–§–û–ö–£–°:\n"
        f"‚Ä¢ {focus}"
    )


# ------------------------
# –•–ï–ù–î–õ–ï–†–´
# ------------------------

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç. –Ø —Ç–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–∏–Ω–æ–∫.\n–ñ–º–∏ ¬´üé≤ –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ¬ª.",
        reply_markup=MAIN_KB,
    )


async def handle_text(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = (update.message.text or "").strip()

    if "–ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ" in text:
        task = build_task()
        await update.message.reply_text(task, reply_markup=MAIN_KB)

    elif "—Å–∏—Å—Ç–µ–º–∞" in text or "—Ñ–æ—Ä–º—É–ª–∞" in text:
        await update.message.reply_text(
            "–Ø —Å–æ–±–∏—Ä–∞—é –∑–∞–¥–∞—á—É –∏–∑ —Ç—Ä—ë—Ö —á–∞—Å—Ç–µ–π:\n"
            "1) –†–µ—Å—É—Ä—Å (–æ—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å –∏–¥–µ—é: –ø–∏–Ω—Ç–µ—Ä–µ—Å—Ç, –∏–Ω—Å—Ç–∞, –∫–Ω–∏–≥–∞, —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–µ–∫—Ç—ã)\n"
            "2) –ó–∞–¥–∞–Ω–∏–µ (–º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å)\n"
            "3) –§–æ–∫—É—Å (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä–µ–∞—Ç–∏–≤)\n\n"
            "–¢—ã –∂–º–∏ –∫–Ω–æ–ø–∫—É. –û—Å—Ç–∞–ª—å–Ω–æ–µ —è —Å–¥–µ–ª–∞—é.",
            reply_markup=MAIN_KB,
        )
    else:
        await update.message.reply_text(
            "–ñ–º–∏ –∫–Ω–æ–ø–∫—É, –º—É–∑—ã–∫–∞–Ω—Ç. –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π.",
            reply_markup=MAIN_KB,
        )


async def main():
    token = BOT_TOKEN
    if not token:
        raise RuntimeError("–ù–µ—Ç BOT_TOKEN –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")

    app = ApplicationBuilder().token(token).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_text))

    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω. –ò–¥–∏ –≤ Telegram.")
    await app.run_polling()


if __name__ == "__main__":
    import asyncio

    asyncio.run(main())
